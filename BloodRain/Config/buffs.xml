<?xml version="1.0" encoding="utf-8"?>
<config>
  <append xpath="/buffs">
    <buff name="buff_blood_rain"
          name_key="buff_blood_rain_name"
          description_key="buff_blood_rain_desc"
          icon="server_feral"
          icon_color="200,0,0">
      <display_value value=".blood_rain_remaining_seconds" />
      <display_value_format value="time" />
      <update_rate value=".5" />
      <stack_type value="ignore" />
      <effect_group>
        <!-- copy the networked cvar to the one that can be formatted -->
        <triggered_effect trigger="onSelfBuffStart"
                          action="ModifyCVar"
                          cvar=".blood_rain_remaining_seconds"
                          operation="set"
                          value="@blood_rain_remaining_seconds" />
        <triggered_effect trigger="onSelfBuffUpdate"
                          action="ModifyCVar"
                          cvar=".blood_rain_remaining_seconds"
                          operation="set"
                          value="@blood_rain_remaining_seconds" />
        <triggered_effect trigger="onSelfBuffRemove"
                          action="RemoveCVar"
                          cvar=".blood_rain_remaining_seconds" />

        <triggered_effect trigger="onSelfBuffStart"
                          action="PlaySound"
                          sound="twitch_bloodmoon_today"
                          play_in_head="true" />
        <triggered_effect trigger="onSelfBuffRemove"
                          action="PlaySound"
                          sound="twitch_bad_buff_ended"
                          play_in_head="true" />
      </effect_group>
    </buff>
  </append>
</config>
